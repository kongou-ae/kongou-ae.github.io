<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Fortigate on Aimless</title>
    <link>http://aimless.jp/categories/fortigate/</link>
    <description>Recent content in Fortigate on Aimless</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <lastBuildDate>Mon, 16 Feb 2015 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://aimless.jp/categories/fortigate/feed/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>AWS上のオンデマンドなUTM製品を比較する</title>
      <link>http://aimless.jp/blog/archives/2399</link>
      <pubDate>Mon, 16 Feb 2015 00:00:00 +0000</pubDate>
      
      <guid>http://aimless.jp/blog/archives/2399</guid>
      <description>&lt;p&gt;イマイチ使いどころが見つけられないAWS上のUTM製品について、オンデマンド版（ライセンスこみで使えるAMI）の費用を比較しました。&lt;/p&gt;

&lt;p&gt;　なお、AWS上には、Barracuda NG FirewallやPaloalto VM-Seriesもあるのですが、これらはオンデマンド版が存在せずBYOL版のみのため、記載していません。オンデマンド版があれば、評価しやすいのに。。。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;インスタンスタイプ&lt;/th&gt;
&lt;th&gt;FortiGate-VM&lt;/th&gt;
&lt;th&gt;CheckPoint VA&lt;/th&gt;
&lt;th&gt;sophos-UTM 9&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;t1.micro&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;$0.02/hr&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;t1.small&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;$0.264/hr&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;m3.medium&lt;/td&gt;
&lt;td&gt;$0.37/hr&lt;/td&gt;
&lt;td&gt;–&lt;/td&gt;
&lt;td&gt;$0.42/hr&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;m3.large&lt;/td&gt;
&lt;td&gt;$0.95/hr&lt;/td&gt;
&lt;td&gt;–&lt;/td&gt;
&lt;td&gt;$0.84/hr&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;m3.xlarge&lt;/td&gt;
&lt;td&gt;$2.13/hr&lt;/td&gt;
&lt;td&gt;–&lt;/td&gt;
&lt;td&gt;$1.68/hr&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;m3.2xlarge&lt;/td&gt;
&lt;td&gt;$4.49/hr&lt;/td&gt;
&lt;td&gt;–&lt;/td&gt;
&lt;td&gt;$3.36/hr&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;c3.large&lt;/td&gt;
&lt;td&gt;$0.835/hr&lt;/td&gt;
&lt;td&gt;$1.815/hr&lt;/td&gt;
&lt;td&gt;$0.525/hr&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;c3.xlarge&lt;/td&gt;
&lt;td&gt;$1.87/hr&lt;/td&gt;
&lt;td&gt;$2.80/hr&lt;/td&gt;
&lt;td&gt;$1.05/hr&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;c3.2xlarge&lt;/td&gt;
&lt;td&gt;$3.95/hr&lt;/td&gt;
&lt;td&gt;$4.86/hr&lt;/td&gt;
&lt;td&gt;$2.10/hr&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;c3.4xlarge&lt;/td&gt;
&lt;td&gt;–&lt;/td&gt;
&lt;td&gt;$6.483/hr&lt;/td&gt;
&lt;td&gt;$4.20/hr&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;c3.8xlarge&lt;/td&gt;
&lt;td&gt;–&lt;/td&gt;
&lt;td&gt;$8.688/hr&lt;/td&gt;
&lt;td&gt;$8.40/hr&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</description>
    </item>
    
    <item>
      <title>AWSにFortiGateをデプロイしてみた（NATとFWポリシー編）</title>
      <link>http://aimless.jp/blog/archives/2358</link>
      <pubDate>Sat, 24 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>http://aimless.jp/blog/archives/2358</guid>
      <description>

&lt;p&gt;&lt;a href=&#34;http://aimless.jp/blog/blog/archives/2317&#34;&gt;AWSにFortiGateをデプロイしてみた（ネットワーク設定編）&lt;/a&gt;の続きです。AWS上に設置したFortiGateでNATとFWポリシーを試します。&lt;/p&gt;

&lt;h2 id=&#34;vpc環境:ec17bdc7c38ff198df2edaa2953430eb&#34;&gt;VPC環境&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;FortiGate-VM&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;項目&lt;/th&gt;
&lt;th&gt;ID&lt;/th&gt;
&lt;th&gt;プライベートIP&lt;/th&gt;
&lt;th&gt;EIP&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ENI(Exernal)&lt;/td&gt;
&lt;td&gt;eni-921a6ecb&lt;/td&gt;
&lt;td&gt;10&amp;#46;175.1.195&lt;/td&gt;
&lt;td&gt;54&amp;#46;65.151.103&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;ENI(internal)&lt;/td&gt;
&lt;td&gt;eni-6304703a&lt;/td&gt;
&lt;td&gt;10&amp;#46;175.2.195&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;CIDR&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;項目&lt;/th&gt;
&lt;th&gt;値&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;VPC CIDR&lt;/td&gt;
&lt;td&gt;10&amp;#46;175.0.0/16&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;external_subnet&lt;/td&gt;
&lt;td&gt;10&amp;#46;175.1.0/24&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;internal_subnet&lt;/td&gt;
&lt;td&gt;10&amp;#46;175.2.0/24&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;external_subnetのroute-table&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Destination&lt;/th&gt;
&lt;th&gt;Target&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;10&amp;#46;175.0.0/16&lt;/td&gt;
&lt;td&gt;local&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;0&amp;#46;0.0.0&lt;/td&gt;
&lt;td&gt;IGW&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;internal_subnetのroute-table&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Destination&lt;/th&gt;
&lt;th&gt;Target&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;10&amp;#46;175.0.0/16&lt;/td&gt;
&lt;td&gt;local&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;0&amp;#46;0.0.0/0&lt;/td&gt;
&lt;td&gt;eni-6304703a&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;　internal_subnetに配置されたインスタンスとインターネットとの通信が、FortiGate-VMを経由するよう、デフォルトルートをFortiGate-VMのinternal側ENIに向けます。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;動作確認用インスタンス&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;　internal_subnetにAmazon_linuxを設置します。IPアドレスは10.175.2.152です。&lt;/p&gt;

&lt;h2 id=&#34;事前準備:ec17bdc7c38ff198df2edaa2953430eb&#34;&gt;事前準備&lt;/h2&gt;

&lt;p&gt;　FortiGate-VMの2つのENIで「Source/dest. check」をfalseにします。なお、インスタンスを右クリックしてSource/dest. checkをfalseにしても、2本目のENIはenableのままでした。Source/dest. checkは、インスタンスではなくENIに対して実施しましょう。&lt;/p&gt;

&lt;h2 id=&#34;ポートフォワード:ec17bdc7c38ff198df2edaa2953430eb&#34;&gt;ポートフォワード&lt;/h2&gt;

&lt;p&gt;　まずはポートフォワードからです。internalに設置されているEC2:10.175.2.152のSSHを、EIP:54.65.151.103の11022で外部公開します。&lt;/p&gt;

&lt;p&gt;　クライアントとサーバだけに注目した通信要件は、「54.65.151.103の11022」を「10.175.2.152の22」にポートフォワードするになりますので、以下の様に設定したのですが、通信できずドツボにはまりました。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-fg-1.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　正しい通信要件は、「EIP:54.65.151.103の11022」をAWSが変換した「10.175.1.195の11022」を、ForiGateが「10.175.2.152の22」にポートフォワードするになりますので、以下の様に設定する必要があります。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-fg-2.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;スタティックnat:ec17bdc7c38ff198df2edaa2953430eb&#34;&gt;スタティックNAT&lt;/h2&gt;

&lt;p&gt;　次はスタティックNATです。FortiGate-VMとは異なるグローバルIPアドレスでEC2を外部公開します。&lt;/p&gt;

&lt;p&gt;　external側のENIに10.175.1.0/24のIPアドレス（10.175.1.194）を追加します。そしてEIPをもう一つ取得し、10.175.1.194に割り当てます。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-fg-3.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;

&lt;p&gt;これにより、FortiGate-VMのパラメータは以下になります。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;FortiGate-VM&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;項目&lt;/th&gt;
&lt;th&gt;ID&lt;/th&gt;
&lt;th&gt;プライベートIP&lt;/th&gt;
&lt;th&gt;EIP&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ENI(Exernal)&lt;/td&gt;
&lt;td&gt;eni-921a6ecb&lt;/td&gt;
&lt;td&gt;10&amp;#46;175.1.195&lt;/td&gt;
&lt;td&gt;54&amp;#46;65.151.103&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;ENI(Exernal)&lt;/td&gt;
&lt;td&gt;eni-921a6ecb&lt;/td&gt;
&lt;td&gt;10&amp;#46;175.1.194&lt;/td&gt;
&lt;td&gt;54&amp;#46;64.192.17&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;ENI(internal)&lt;/td&gt;
&lt;td&gt;eni-6304703a&lt;/td&gt;
&lt;td&gt;10&amp;#46;175.2.195&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;　そして、新規取得した54.64.192.17を割り当てた10.175.1.194を利用して、バーチャルIPアドレスを作成します。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-fg-2.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;ポリシー:ec17bdc7c38ff198df2edaa2953430eb&#34;&gt;ポリシー&lt;/h2&gt;

&lt;p&gt;　ネットワークやNATの設定はAWSの仕様を意識する必要がありますが、ポリシーの設定はFortiGate-VM単体の設定ですので、普通のFortiGateと同じです。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;サンプル&lt;/strong&gt;　 　&lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-fg-4.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;

&lt;p&gt;このように設定すると、以下の動作になります。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;外部から54.64.192.17へのすべての通信が、AWSによって10.175.1.194にNATされ、さらにFortiGate-VMでNATされてEC2：10.175.2.152に到達する&lt;/li&gt;
&lt;li&gt;EC2：10.175.2.152から外部へのアクセスは、FortiGateによって10.175.1.194でNATされ、さらにAWSによって54.64.192.17にNATされて外部に到達する。&lt;/li&gt;
&lt;li&gt;internal_subnetから外部へのアクセスは、FortiGateによって10.175.1.195でNATされ、さらにAWSによって54.65.151.103にNATされて外部に到達する。&lt;/li&gt;
&lt;li&gt;それ以外の通信はすべて拒否する。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;ipアドレスの制限:ec17bdc7c38ff198df2edaa2953430eb&#34;&gt;IPアドレスの制限&lt;/h2&gt;

&lt;p&gt;　バーチャルIP用のアドレスを確保するためには、ENIにIPアドレスを追加割り当てする必要があります。ただし、ENIに割り当てられるIPアドレスはインスタンスタイプによって上限があります。（&lt;a href=&#34;http://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/using-eni.html#AvailableIpPerENI&#34;&gt;参考：インスタンスタイプあたりの ENI ごとのプライベート IP アドレス&lt;/a&gt;）&lt;/p&gt;

&lt;p&gt;　今回利用しているt3.mediumは最大6個になります。EIPはENIのプライベートアドレスに割り当てる必要がありますので、取得できるEIPの数も最大6個になってしまいます。つまり、このt3.mediumのFortiGate-VMを利用すると、最大6個のIPアドレスしか外部公開できなくなります&amp;#8230;インスタンスタイプを上げても最大30個です。これは微妙&amp;#8230;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-fg-5.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>AWSにFortiGateをデプロイしてみた（ログ出力編）</title>
      <link>http://aimless.jp/blog/archives/2378</link>
      <pubDate>Sat, 24 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>http://aimless.jp/blog/archives/2378</guid>
      <description>

&lt;p&gt;AWS上にデプロイしたForiGate-VMは、デフォルトではログが出力されなかったので、ログを出力するために必要な作業をメモします。&lt;/p&gt;

&lt;h2 id=&#34;初期状態:0369e224a48532743f250f58f50b7a06&#34;&gt;初期状態&lt;/h2&gt;

&lt;p&gt;　デプロイ直後の状況は以下の通りです。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;メモリログが無効になっている&lt;/li&gt;
&lt;li&gt;ディスクログは有効だが、そもそもディスクにパーティションが作られていない&lt;/li&gt;
&lt;/ul&gt;

&lt;script src=&#34;https://gist.github.com/kongou-ae/e3fb5b701e6744553d38.js&#34;&gt;&lt;/script&gt;

&lt;p&gt;　FortiGate-VMには、マーケットプレイスからポチポチデプロイしたときにデフォルトで選択されているEBSを搭載しているのですが、利用できていません。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;EBS選択画面&lt;/strong&gt; &lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-fg-6.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;FortiGateの管理画面&lt;/strong&gt; &lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-fg-8.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;対処方法:0369e224a48532743f250f58f50b7a06&#34;&gt;対処方法&lt;/h2&gt;

&lt;p&gt;　メモリログを有効にしたい場合はCLIから設定を変更します。ディスクログを有効にする場合は、CLIからディスクをフォーマットします。&lt;/p&gt;

&lt;script src=&#34;https://gist.github.com/kongou-ae/bf9799c6dfc97a24cf4f.js&#34;&gt;&lt;/script&gt;

&lt;h2 id=&#34;動作確認:0369e224a48532743f250f58f50b7a06&#34;&gt;動作確認&lt;/h2&gt;

&lt;p&gt;　管理画面上でもディスクを認識するようになりました。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-fg-9.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　ログ確認画面の表示をディスクに切り替えます。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-fg-10.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　無事、ディスクに保存されているログを確認出来るようになりました。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-fg-11.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>AWSにFortiGateをデプロイしてみた（ネットワーク設定編）</title>
      <link>http://aimless.jp/blog/archives/2317</link>
      <pubDate>Fri, 23 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>http://aimless.jp/blog/archives/2317</guid>
      <description>

&lt;p&gt;いつの日か、AWS上の通信ログを取りたくなる日が来るだろうということで、使い慣れているFortiGateのVM版をAWS上にデプロイしてみました。&lt;/p&gt;

&lt;p&gt;　以前調べた時は、AWSのマーケットプライスで提供されているモデルがBYOL版のみであったため試せなかったのですが、現時点ではライセンス込みのモデルがあるので、気軽に試せます。&lt;/p&gt;

&lt;h2 id=&#34;vpc環境:8dfb55f8e4769f24674df2a1c9f777e6&#34;&gt;VPC環境&lt;/h2&gt;

&lt;p&gt;　FortiGate-VMをデプロイするVPCの環境は以下の通りです。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;CIDR&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;項目&lt;/th&gt;
&lt;th&gt;値&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;VPC CIDR&lt;/td&gt;
&lt;td&gt;10&amp;#46;175.0.0/16&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;external_subnet&lt;/td&gt;
&lt;td&gt;10&amp;#46;175.1.0/24&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;internal_subnet&lt;/td&gt;
&lt;td&gt;10&amp;#46;175.2.0/24&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;external_subnetのroute-table&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Destination&lt;/th&gt;
&lt;th&gt;Target&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;10&amp;#46;175.0.0/16&lt;/td&gt;
&lt;td&gt;local&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;0&amp;#46;0.0.0&lt;/td&gt;
&lt;td&gt;IGW&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;internal_subnetのroute-table&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Destination&lt;/th&gt;
&lt;th&gt;Target&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;10&amp;#46;175.0.0/16&lt;/td&gt;
&lt;td&gt;local&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&#34;とりあえずnic1個でデプロイ:8dfb55f8e4769f24674df2a1c9f777e6&#34;&gt;とりあえずNIC1個でデプロイ&lt;/h2&gt;

&lt;p&gt;　マーケットプライスからポチポチとデプロイします。とりあえず、一般的なサーバと同様、NIC1個で始めます。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;パラメータ&lt;/th&gt;
&lt;th&gt;設定&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;AMI&lt;/td&gt;
&lt;td&gt;FortiGate-VM&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;instance type&lt;/td&gt;
&lt;td&gt;m3.medium&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Network&lt;/td&gt;
&lt;td&gt;VPC&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;subnet&lt;/td&gt;
&lt;td&gt;external_subnet&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;security group&lt;/td&gt;
&lt;td&gt;全通信許可&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;　起動後、EIPを作成し、external_subnetのENIに割り当てます。この時点で、ブラウザからENIのグローバルIPアドレスにHTTPSでアクセスすると、ログイン画面が見られるはずです。初期IDとパスワード（admin/インスタンスID）を入力してログインしましょう。&lt;/p&gt;

&lt;p&gt;　ログインすると、FortiGateを触ったことのある人には見慣れた画面が出ます。取りあえずGUIを日本語表示にしましょう。気になる方は、管理アクセスのIPアドレス制限を行いましょう。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-1.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　FortiGate-VMは、バンドル版なんですね。フルUTM機能が使えますので、ファイアウォール以外の使い道もありそうです。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-6.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;nicを増やす:8dfb55f8e4769f24674df2a1c9f777e6&#34;&gt;NICを増やす&lt;/h2&gt;

&lt;p&gt;　GUIでインターフェースを確認すると、NICは当然一つしかありません。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-3.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　FWはインターフェースを複数持ってなんぼですので、NICを増やします。マネジメントコンソールでENIを作成し、FortiGate-VMのインスタンスにアタッチします。そして、アタッチしたNICを認識させるためにFortiGateを再起動します。（他の方法はないのか&amp;#8230;）&lt;/p&gt;

&lt;p&gt;　FortiGateがENIを認識すると、IP未設定のインターフェースがリンクアップしますので、GUIでENIに設定したIPアドレスを設定します。これで、NICを二つ持ったNATモードのFortiGateの完成です。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-5.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　なお、AWSのインスタンスは、インスタンスタイプごとに利用できるENIの数が決まっています。（&lt;a href=&#34;http://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/using-eni.html#AvailableIpPerENI&#34;&gt;参考：インスタンスタイプあたりの ENI ごとのプライベート IP アドレス&lt;/a&gt;） 今回選択したm3.mediumは最大2です。そのため、GUI的には7ポートまで利用可能な様に見えますが、3つ目のENIをアタッチしようとすると、エラーになります&amp;#8230;m3.mediumだとDMZが作れない&amp;#8230;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/wp-content/uploads/2015/01/aws-7.png&#34; alt=&#34;enter image description here&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　次回は、バーチャルIPを作成し、internal_subnetに設置したインスタンスとインターネット間の通信を実現します。また、複数のバーチャルIPを作成する方法を確認します。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ShellShock（ネットワーク機器編）</title>
      <link>http://aimless.jp/blog/archives/2229</link>
      <pubDate>Fri, 26 Sep 2014 00:00:00 +0000</pubDate>
      
      <guid>http://aimless.jp/blog/archives/2229</guid>
      <description>

&lt;h1 id=&#34;はじめに:b35a1c1c8d870e3c08abe903af5123b9&#34;&gt;はじめに&lt;/h1&gt;

&lt;p&gt;ShellShockに関して、私の業務と関わりのあるネットワーク機器ベンダのSecurity Advisoryが揃ってきたので、現時点での情報を簡単にまとめます。&lt;/p&gt;

&lt;p&gt;あくまでも現時点ですので、今後内容が変更になる可能性があります。また、詳細については、保守ベンダにお問い合わせください。&lt;/p&gt;

&lt;h1 id=&#34;cisco:b35a1c1c8d870e3c08abe903af5123b9&#34;&gt;Cisco&lt;/h1&gt;

&lt;p&gt;&lt;a href=&#34;http://tools.cisco.com/security/center/content/CiscoSecurityAdvisory/cisco-sa-20140926-bash&#34;&gt;http://tools.cisco.com/security/center/content/CiscoSecurityAdvisory/cisco-sa-20140926-bash&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;s&gt;IOSは該当しません。Nexusについては、N7kとN9kが該当します。具体的な対応方法については、個別にBugIDが振られていますので、そちらで確認する必要があります。&lt;/s&gt;&lt;/p&gt;

&lt;p&gt;（9/28更新）IOSとIOS XRは該当しません。IOS XE、Nexus、UCSは該当します。具体的な対応方法については、個別にBugIDが振られていますので、そちらで確認する必要があります。&lt;/p&gt;

&lt;h1 id=&#34;fortinet:b35a1c1c8d870e3c08abe903af5123b9&#34;&gt;Fortinet&lt;/h1&gt;

&lt;p&gt;&lt;a href=&#34;http://www.fortiguard.com/advisory/FG-IR-14-030&#34;&gt;http://www.fortiguard.com/advisory/FG-IR-14-030&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;FortiGateは該当しません。ManagerやAnalyzerが該当します。&lt;/p&gt;

&lt;h1 id=&#34;juniper:b35a1c1c8d870e3c08abe903af5123b9&#34;&gt;Juniper&lt;/h1&gt;

&lt;p&gt;&lt;a href=&#34;http://kb.juniper.net/InfoCenter/index?page=content&amp;amp;id=JSA10648&#34;&gt;http://kb.juniper.net/InfoCenter/index?page=content&amp;amp;id=JSA10648&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Junos、ScreenOS、IVE OSといった主要製品は該当しません。&lt;/p&gt;

&lt;h1 id=&#34;f5:b35a1c1c8d870e3c08abe903af5123b9&#34;&gt;F5&lt;/h1&gt;

&lt;p&gt;&lt;a href=&#34;http://support.f5.com/kb/en-us/solutions/public/15000/600/sol15629.html&#34;&gt;http://support.f5.com/kb/en-us/solutions/public/15000/600/sol15629.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;主要な製品はほとんど該当します。&lt;/p&gt;

&lt;h1 id=&#34;checkpoint:b35a1c1c8d870e3c08abe903af5123b9&#34;&gt;CheckPoint&lt;/h1&gt;

&lt;p&gt;&lt;a href=&#34;https://supportcenter.checkpoint.com/supportcenter/portal?eventSubmit_doGoviewsolutiondetails=&amp;amp;solutionid=sk102673&amp;amp;src=securityAlerts&#34;&gt;https://supportcenter.checkpoint.com/supportcenter/portal?eventSubmit_doGoviewsolutiondetails=&amp;amp;solutionid=sk102673&amp;amp;src=securityAlerts&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;GaiaとSPLATともに該当します。&lt;/p&gt;

&lt;h1 id=&#34;hp:b35a1c1c8d870e3c08abe903af5123b9&#34;&gt;HP&lt;/h1&gt;

&lt;p&gt;&lt;s&gt;Security Advisoryのページが見当たりません。。。どこー。&lt;/s&gt;&lt;/p&gt;

&lt;p&gt;（9/28更新）&lt;a href=&#34;http://h17007.www1.hp.com/docs/networking/alert/GNUBASHStatement-20140926.pdf&#34;&gt;http://h17007.www1.hp.com/docs/networking/alert/GNUBASHStatement-20140926.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;主要な製品が該当しない旨を示すPDFが公開されたのですが、リンク切れになってしまいました。。。キャッシュは以下です。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://webcache.googleusercontent.com/search?q=cache:cq8A9XMgwUIJ:h17007.www1.hp.com/docs/networking/alert/GNUBASHStatement-20140926.pdf+&amp;amp;cd=1&amp;amp;hl=ja&amp;amp;ct=clnk&amp;amp;gl=jp&#34;&gt;http://webcache.googleusercontent.com/search?q=cache:cq8A9XMgwUIJ:h17007.www1.hp.com/docs/networking/alert/GNUBASHStatement-20140926.pdf+&amp;amp;cd=1&amp;amp;hl=ja&amp;amp;ct=clnk&amp;amp;gl=jp&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&#34;a10:b35a1c1c8d870e3c08abe903af5123b9&#34;&gt;A10&lt;/h1&gt;

&lt;p&gt;&lt;s&gt;Security Advisoryのページが見当たりません。。。どこー&lt;/s&gt;&lt;/p&gt;

&lt;p&gt;（9/28更新）&lt;a href=&#34;https://www.a10networks.com/vadc/index.php/shellshock-bug-when-a-perfect-10-0-score-is-not-so-perfect-and-how-you-can-protect-your-infrastructure/&#34;&gt;https://www.a10networks.com/vadc/index.php/shellshock-bug-when-a-perfect-10-0-score-is-not-so-perfect-and-how-you-can-protect-your-infrastructure/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;主要な製品は該当するようです。ただし、A10のSecurity Advisory を見るためには、製品のSNを使ってアカウント登録が必要のようなので、詳細は不明です。。。&lt;/p&gt;

&lt;h1 id=&#34;radware:b35a1c1c8d870e3c08abe903af5123b9&#34;&gt;Radware&lt;/h1&gt;

&lt;p&gt;&lt;s&gt;現時点でのアナウンスは確認できません。&lt;/s&gt;&lt;/p&gt;

&lt;p&gt;（9/28更新）&lt;a href=&#34;https://kb.radware.com/questions/3588/Security+Advisory%3A+Shellshock+bash+CVE-2014-6271%2C+CVE-2014-7169&#34;&gt;https://kb.radware.com/questions/3588/Security+Advisory%3A+Shellshock+bash+CVE-2014-6271%2C+CVE-2014-7169&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AlteonやLinkProofなど主要製品は該当しません。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>SSLインスペクションについて調べた</title>
      <link>http://aimless.jp/blog/archives/2187</link>
      <pubDate>Sat, 30 Aug 2014 00:00:00 +0000</pubDate>
      
      <guid>http://aimless.jp/blog/archives/2187</guid>
      <description>

&lt;p&gt;UTM製品は、SSLによって暗号化されている通信の中身を見てUTM処理を行うものがあります。イマイチ振る舞いが分からなかったので、いろいろと調べました。きっとこんな感じだろレベルであり、あってるかどうかは不明です。なお、絵を描く気力はなかったです。&lt;/p&gt;

&lt;h1 id=&#34;ssl通信の流れ:7fa59bb8c2a35e1843fcd1fa00ab3ce6&#34;&gt;SSL通信の流れ&lt;/h1&gt;

&lt;p&gt;　クライアントとサーバ間で、SSLのセッションとコネクションを確立するまでの流れは以下の通りです。&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;クライアントとサーバ間で暗号化方式のネゴシエーションを行う。&lt;/li&gt;
&lt;li&gt;サーバは、クライアントにサーバ証明書（とCA中間証明書）を送る。&lt;/li&gt;
&lt;li&gt;クライアントは、受信したサーバ証明書を検証する。（検証プロセスは後述）&lt;/li&gt;
&lt;li&gt;クライアントは、サーバ証明書からサーバの公開鍵を取り出す。&lt;/li&gt;
&lt;li&gt;クライアントは、共通鍵の元を作る。&lt;/li&gt;
&lt;li&gt;クライアントは、サーバの公開鍵を利用して、共通鍵の元を暗号化する。&lt;/li&gt;
&lt;li&gt;クライアントは、暗号化した共通鍵の元をサーバへ送る。&lt;/li&gt;
&lt;li&gt;サーバは、暗号化された共通鍵の元を受け取り、サーバの秘密鍵で復号する。&lt;/li&gt;
&lt;li&gt;サーバとクライアントは、互いに持っている共通鍵の元を利用して共通鍵を生成する。&lt;/li&gt;
&lt;li&gt;サーバとクライアントは、生成した共通鍵を利用して通信を暗号化する。&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&#34;サーバ証明書に書かれている事:7fa59bb8c2a35e1843fcd1fa00ab3ce6&#34;&gt;サーバ証明書に書かれている事&lt;/h1&gt;

&lt;p&gt;　3つのことが書かれている。&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;tbsCertificate : 証明書の基本的な情報と公開鍵（＝証明書が証明したい内容）&lt;/li&gt;
&lt;li&gt;signatureAlgorithm : 署名アルゴリズム&lt;/li&gt;
&lt;li&gt;signatureValue : 認証局の署名&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&#34;証明書検証の流れ:7fa59bb8c2a35e1843fcd1fa00ab3ce6&#34;&gt;証明書検証の流れ&lt;/h1&gt;

&lt;ol&gt;
&lt;li&gt;クライアントは、サーバ証明書に記載された認証局が、自身の信頼された認証局に登録されているかを確認する。（証明書の発行者が信じるに値するかをチェックする）&lt;/li&gt;
&lt;li&gt;クライアントは、自身に登録されている認証局の公開鍵を利用して、サーバ証明書の署名を検証する。（信じられる発行者が発行した証明書かどうかをチェックする）&lt;/li&gt;
&lt;li&gt;クライアントは、サーバ証明書に記載されているコモンネームが、アクセスしようとしているサーバのFQDNと一致することを確認する。（信じられる証明書に記載されている場所にアクセスしているかチェックする）&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&#34;sslインスペクションにおけるssl通信の仕組み:7fa59bb8c2a35e1843fcd1fa00ab3ce6&#34;&gt;SSLインスペクションにおけるSSL通信の仕組み&lt;/h1&gt;

&lt;p&gt;　SSLインスペクションでは、暗号化されたSL通信に対してUTM処理を行う必要があります。&lt;/p&gt;

&lt;p&gt;　しかし、「SSL通信の流れ」で確認した通り、クライアントとサーバ間のセッションとコネクションの確立において、通信の復号化に必要な共有鍵は一切交換されません。クライアントとサーバの間でやり取りされる情報は、「サーバの公開鍵」と「公開鍵で暗号化された共有鍵の元」だけです。共有鍵のヒントとなる「公開鍵で暗号化された共有鍵の元」を復号するためには「サーバの秘密鍵」が必要ですから、経路上に存在するUTM装置はお手上げです。&lt;/p&gt;

&lt;p&gt;　そこでUTM装置は、綺麗な中間者攻撃を行います。SSLインスペクションにおいて、SSLセッションとコネクションを確立する流れは以下の通りです。&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;クライアントはサーバに暗号化方式のネゴシエーションを行う。&lt;/li&gt;
&lt;li&gt;クライアントからサーバへのネゴシエーションを検知したUTM製品は、クライアントからサーバへのネゴシエーションをいったんストップする。&lt;/li&gt;
&lt;li&gt;UTM製品は、クライアントの代わりにサーバに暗号化方式のネゴシエーションを行う。&lt;/li&gt;
&lt;li&gt;サーバとUTM製品間で暗号化方式のネゴシエーションを行う。&lt;/li&gt;
&lt;li&gt;サーバは、UTM製品にサーバ証明書（と中間CA証明書）を送る。&lt;/li&gt;
&lt;li&gt;UTM製品は、受信したサーバ証明書を検証する。

&lt;ul&gt;
&lt;li&gt;以降は、UTM製品とサーバ間で上述したSSL通信の流れを実施します。その結果、UTM製品とサーバ間でSSLのセッションとコネクションが確立します。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;UTM製品は、サーバのサーバ証明書のtbsCertificateの中の「発行者」と「公開鍵」をUTM製品のものに書き換える。（多分。自宅のFG60Bにdeep-scanの設定が入らなかったため、UTM製品が作るオレオレサーバ証明書が入手できなかった）&lt;/li&gt;
&lt;li&gt;UTM製品は、サーバのサーバ証明書を元に作ったオレオレtbsCertificateに対して、UTM製品のオレオレ認証局の秘密鍵で署名する。その結果、発行者と公開鍵以外は、サーバのサーバ証明書と同じ「オレオレサーバ証明書」が完成する。&lt;/li&gt;
&lt;li&gt;UTM製品は、ストップしていたクライアントからサーバへの暗号化方式のネゴシエーションに代理応答する形で、クライアントと暗号化方式のネゴシエーションを行う。&lt;/li&gt;
&lt;li&gt;UTM製品は、クライアントにオレオレサーバ証明書（とオレオレCA証明書）を送る。&lt;/li&gt;
&lt;li&gt;クライアントは、受信したUTM製品のオレオレサーバ証明書を検証する。

&lt;ul&gt;
&lt;li&gt;ここで検証が失敗します。なぜなら、クライアント自身の信頼された認証局に、UTM製品のオレオレ認証局が存在しないためです。信頼していない認証局が発行したオレオレサーバ証明書は信じないというわけです。&lt;/li&gt;
&lt;li&gt;この問題を解決するため、クライアントにUTM製品のオレオレ認証局のCA証明書をインポートする必要があります。UTM製品のオレオレ認証局を信頼された認証局にすると、UTM製品のオレオレサーバ証明書の検証は成功します。信じられる発行者が発行したサーバ証明書なのですから。&lt;/li&gt;
&lt;li&gt;オレオレサーバ証明書に記載されている実在証明に関する情報は、サーバのサーバ証明書と同一です。従って、サーバのサーバ証明書がEV SSLであれば、UTM製品が発行したオレオレサーバ証明書であっても、ブラウザには鍵マークと緑色の企業名が表示されます。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;クライアントは、UTM製品のオレオレサーバ証明書からUTM製品の公開鍵を取り出す。&lt;/li&gt;
&lt;li&gt;クライアントは、共通鍵の元を作る。&lt;/li&gt;
&lt;li&gt;クライアントは、UTM製のオレオレサーバ証明書の公開鍵を利用して、共通かぎの元を暗号化する。&lt;/li&gt;
&lt;li&gt;クライアントは、暗号化した共通鍵の元をUTM製品へ送る。&lt;/li&gt;
&lt;li&gt;UTM製品は、暗号化された共通鍵の元を受け取り、UTM製品の秘密鍵で復号する。&lt;/li&gt;
&lt;li&gt;クライアントとUTM製品は、互いに持っている共通鍵の元を利用して共通鍵を生成する。&lt;/li&gt;
&lt;li&gt;クライアントとUTM製品は、生成した共通鍵を利用して通信を暗号化する。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;　最終的には、クライアントとUTM製品間、UTM製品とサーバ間で、2つのSSL通信が確立します。こうすることで、UTM製品はサーバとクライアントがやりとりする通信を平文で得ることができますので、UTM処理を行うことができます。よくできてるなーと思いますし、SSLインスペクションが高負荷であること理由も納得がいきます。&lt;/p&gt;

&lt;h1 id=&#34;備考:7fa59bb8c2a35e1843fcd1fa00ab3ce6&#34;&gt;備考&lt;/h1&gt;

&lt;p&gt;　ふと、UTM製品用にサーバ証明書をインストールしたらどうなるんだろうかと思いました。しかし、サーバのサーバ証明書に含まれるtbsCertificateをクライアントに提示しないと、実在証明の検証失敗による証明書エラーが出てしまうので意味がないですね。&lt;/p&gt;

&lt;p&gt;　tbsCertificateの情報はそのままで、サーバ証明書の公開鍵だけをUTM製品のサーバ証明書の公開鍵に変更すると、証明書のハッシュ値と署名と異なってしまうのでやはり検証エラーになります。&lt;/p&gt;

&lt;p&gt;　これを回避するには自分で再署名して署名を作り直すしかありません。結局オレオレ認証局に頼るしかないので、結果は同じですね。サーバ証明書が無駄になります。&lt;/p&gt;

&lt;h1 id=&#34;参考:7fa59bb8c2a35e1843fcd1fa00ab3ce6&#34;&gt;参考&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://support.microsoft.com/kb/257587/ja&#34;&gt;SSL ハンドシェイクでのサーバー認証プロセスに関する説明&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://support.microsoft.com/kb/257591/ja&#34;&gt;SSL (Secure Sockets Layer) ハンドシェイクの概要&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://e-publishing.jp/contents/koutantech/aidd02_01.pdf&#34;&gt;暗号化、認証、証明&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.tama200x.com/blog/?p=565&#34;&gt;[SSL] SSLサーバ証明書について考える&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://itpro.nikkeibp.co.jp/article/COLUMN/20071002/283518/?ST=selfup&#34;&gt;図解で学ぶネットワークの基礎：SSL編&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.ipa.go.jp/security/rfc/RFC2459JA.html#041&#34;&gt;インターネットX.509 PKI &amp;#8211; 証明書と CRL のプロファイル&lt;/a&gt; &lt;a href=&#34;http://www.trustss.co.jp/smnDataFormat410.html&#34;&gt;電子証明書のデータ形式 &amp;#8211; RFC3289 X.509 Public Key Infrastructure Certificate and CRL Profile&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>OpenSSL脆弱性の影響（ネットワーク機器編）</title>
      <link>http://aimless.jp/blog/archives/2019</link>
      <pubDate>Sat, 07 Jun 2014 00:00:00 +0000</pubDate>
      
      <guid>http://aimless.jp/blog/archives/2019</guid>
      <description>

&lt;p&gt;週明けからの対応に向けて、自分に影響のありそうなベンダのアナウンスを調べたのでメモ。（6/7 21:30現在です）&lt;/p&gt;

&lt;p&gt;　CVE-2010-5298がCVE-2014-5298になっていたので、修正しました（6/9）　&lt;/p&gt;

&lt;h1 id=&#34;サマリー:3197b1351379e2f9e723d5ccc5720427&#34;&gt;サマリー&lt;/h1&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;CVE&lt;/th&gt;
&lt;th&gt;Impact&lt;/th&gt;
&lt;th&gt;fortinet&lt;/th&gt;
&lt;th&gt;Juniper&lt;/th&gt;
&lt;th&gt;Checkpoint&lt;/th&gt;
&lt;th&gt;Cisco&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CVE-2014-0076&lt;/td&gt;
&lt;td&gt;情報漏洩&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0195&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0198&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0221&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0224&lt;/td&gt;
&lt;td&gt;MITM&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-3470&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2010-5298&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h1 id=&#34;fortinet:3197b1351379e2f9e723d5ccc5720427&#34;&gt;Fortinet&lt;/h1&gt;

&lt;p&gt;　私が影響を受けるFortGateだけ記載します。その他については&lt;a href=&#34;https://www.fortiguard.com/advisory/FG-IR-14-018/&#34;&gt;Multiple Vulnerabilities in OpenSSL&lt;/a&gt;を参照してください。これはバージョンアップ祭りか？&lt;/p&gt;

&lt;p&gt;| CVE           | Impact | 影響 | 該当                                           |
| &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;- | &amp;mdash;&amp;mdash; | &amp;ndash; | &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash; |
| CVE-2014-0076 | 情報漏洩   | なし | &amp;#8211;                                      |
| CVE-2014-0195 | DoS    | あり | FortiOS 4.x and 5.x(CAPWAPを使っていれば)           |
| CVE-2014-0198 | DoS    | あり | FortiOS 5.x SSL VPN and HTTPS administration |
| CVE-2014-0221 | DoS    | あり | FortiGateは影響なし                               |
| CVE-2014-0224 | MITM   | あり | FortiOS 4.x and 5.x                          |
| CVE-2014-3470 | DoS    | なし | &amp;#8211;                                      |
| CVE-2010-5298 | DoS    | あり | FortiOS 5.x SSL VPN and HTTPS administration |&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;CVE&lt;/th&gt;
&lt;th&gt;Workarounds&lt;/th&gt;
&lt;th&gt;根本対応&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CVE-2014-0076&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0195&lt;/td&gt;
&lt;td&gt;インターフェースでCAPWAPを無効化&lt;/td&gt;
&lt;td&gt;バージョンアップ&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0198&lt;/td&gt;
&lt;td&gt;なし&lt;/td&gt;
&lt;td&gt;バージョンアップ&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0221&lt;/td&gt;
&lt;td&gt;なし&lt;/td&gt;
&lt;td&gt;バージョンアップ&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0224&lt;/td&gt;
&lt;td&gt;インターフェースへのIPS適応&lt;/td&gt;
&lt;td&gt;バージョンアップ&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-3470&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2010-5298&lt;/td&gt;
&lt;td&gt;なし&lt;/td&gt;
&lt;td&gt;バージョンアップ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h1 id=&#34;juniper:3197b1351379e2f9e723d5ccc5720427&#34;&gt;Juniper&lt;/h1&gt;

&lt;p&gt;　私が影響を受けるScreenOSとVPNだけ記載します。その他について&lt;a href=&#34;http://kb.juniper.net/InfoCenter/index?page=content&amp;amp;id=JSA10629&#34;&gt;2014-06 Out of Cycle Security Bulletin: Vulnerabilities in OpenSSL related to ChangeCipherSpec, DTLS, SSL_MODE_RELEASE_BUFFERS and ECDH ciphersuites&lt;/a&gt;を参照してください。&lt;/p&gt;

&lt;p&gt;　CVE-2014-0224は、個別で詳細アナウンスがあります。&lt;a href=&#34;http://kb.juniper.net/InfoCenter/index?page=content&amp;amp;id=KB29195&#34;&gt;Junos Pulse/SA (SSLVPN): Details on fixes for SSL/TLS MITM vulnerability (CVE-2014-0224)/JSA10629&lt;/a&gt;&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;CVE&lt;/th&gt;
&lt;th&gt;Impact&lt;/th&gt;
&lt;th&gt;影響&lt;/th&gt;
&lt;th&gt;該当&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CVE-2014-0076&lt;/td&gt;
&lt;td&gt;情報漏洩&lt;/td&gt;
&lt;td&gt;あり&lt;/td&gt;
&lt;td&gt;該当なし&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0195&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;あり&lt;/td&gt;
&lt;td&gt;該当なし&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0198&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;あり&lt;/td&gt;
&lt;td&gt;SSL-VPN&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0221&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;なし&lt;/td&gt;
&lt;td&gt;該当なし&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0224&lt;/td&gt;
&lt;td&gt;MITM&lt;/td&gt;
&lt;td&gt;あり&lt;/td&gt;
&lt;td&gt;ScreenOS、SSL-VPN※1&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-3470&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;td&gt;Junos Pulseは影響なし&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2010-5298&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;あり&lt;/td&gt;
&lt;td&gt;SSL-VPN(IVE OS 8.0r4, and 7.4r11未満)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;※1　サーバが7.4Rx または8.0Rxで クライアントがPulseまたはN/Cを利用している場合。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;CVE&lt;/th&gt;
&lt;th&gt;Workarounds&lt;/th&gt;
&lt;th&gt;根本対応&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CVE-2014-0076&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0195&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0198&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;情報なし&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0221&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0224&lt;/td&gt;
&lt;td&gt;ScreenOS:SSLを使う機能を停止(e.g.GUI)&lt;/td&gt;
&lt;td&gt;バージョンアップ&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-3470&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2010-5298&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;情報なし&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h1 id=&#34;checkpoint:3197b1351379e2f9e723d5ccc5720427&#34;&gt;CheckPoint&lt;/h1&gt;

&lt;p&gt;　こちらにまとまっています。[　週明けからの対応に向けて、自分に影響のありそうなベンダのアナウンスを調べたのでメモ。（6/7 21:30現在です）&lt;/p&gt;

&lt;p&gt;　CVE-2010-5298がCVE-2014-5298になっていたので、修正しました（6/9）　&lt;/p&gt;

&lt;h1 id=&#34;サマリー-1:3197b1351379e2f9e723d5ccc5720427&#34;&gt;サマリー&lt;/h1&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;CVE&lt;/th&gt;
&lt;th&gt;Impact&lt;/th&gt;
&lt;th&gt;fortinet&lt;/th&gt;
&lt;th&gt;Juniper&lt;/th&gt;
&lt;th&gt;Checkpoint&lt;/th&gt;
&lt;th&gt;Cisco&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CVE-2014-0076&lt;/td&gt;
&lt;td&gt;情報漏洩&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0195&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0198&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0221&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0224&lt;/td&gt;
&lt;td&gt;MITM&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-3470&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2010-5298&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;影響あり&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;影響なし&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h1 id=&#34;fortinet-1:3197b1351379e2f9e723d5ccc5720427&#34;&gt;Fortinet&lt;/h1&gt;

&lt;p&gt;　私が影響を受けるFortGateだけ記載します。その他については&lt;a href=&#34;https://www.fortiguard.com/advisory/FG-IR-14-018/&#34;&gt;Multiple Vulnerabilities in OpenSSL&lt;/a&gt;を参照してください。これはバージョンアップ祭りか？&lt;/p&gt;

&lt;p&gt;| CVE           | Impact | 影響 | 該当                                           |
| &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;- | &amp;mdash;&amp;mdash; | &amp;ndash; | &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash; |
| CVE-2014-0076 | 情報漏洩   | なし | &amp;#8211;                                      |
| CVE-2014-0195 | DoS    | あり | FortiOS 4.x and 5.x(CAPWAPを使っていれば)           |
| CVE-2014-0198 | DoS    | あり | FortiOS 5.x SSL VPN and HTTPS administration |
| CVE-2014-0221 | DoS    | あり | FortiGateは影響なし                               |
| CVE-2014-0224 | MITM   | あり | FortiOS 4.x and 5.x                          |
| CVE-2014-3470 | DoS    | なし | &amp;#8211;                                      |
| CVE-2010-5298 | DoS    | あり | FortiOS 5.x SSL VPN and HTTPS administration |&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;CVE&lt;/th&gt;
&lt;th&gt;Workarounds&lt;/th&gt;
&lt;th&gt;根本対応&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CVE-2014-0076&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0195&lt;/td&gt;
&lt;td&gt;インターフェースでCAPWAPを無効化&lt;/td&gt;
&lt;td&gt;バージョンアップ&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0198&lt;/td&gt;
&lt;td&gt;なし&lt;/td&gt;
&lt;td&gt;バージョンアップ&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0221&lt;/td&gt;
&lt;td&gt;なし&lt;/td&gt;
&lt;td&gt;バージョンアップ&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0224&lt;/td&gt;
&lt;td&gt;インターフェースへのIPS適応&lt;/td&gt;
&lt;td&gt;バージョンアップ&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-3470&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2010-5298&lt;/td&gt;
&lt;td&gt;なし&lt;/td&gt;
&lt;td&gt;バージョンアップ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h1 id=&#34;juniper-1:3197b1351379e2f9e723d5ccc5720427&#34;&gt;Juniper&lt;/h1&gt;

&lt;p&gt;　私が影響を受けるScreenOSとVPNだけ記載します。その他について&lt;a href=&#34;http://kb.juniper.net/InfoCenter/index?page=content&amp;amp;id=JSA10629&#34;&gt;2014-06 Out of Cycle Security Bulletin: Vulnerabilities in OpenSSL related to ChangeCipherSpec, DTLS, SSL_MODE_RELEASE_BUFFERS and ECDH ciphersuites&lt;/a&gt;を参照してください。&lt;/p&gt;

&lt;p&gt;　CVE-2014-0224は、個別で詳細アナウンスがあります。&lt;a href=&#34;http://kb.juniper.net/InfoCenter/index?page=content&amp;amp;id=KB29195&#34;&gt;Junos Pulse/SA (SSLVPN): Details on fixes for SSL/TLS MITM vulnerability (CVE-2014-0224)/JSA10629&lt;/a&gt;&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;CVE&lt;/th&gt;
&lt;th&gt;Impact&lt;/th&gt;
&lt;th&gt;影響&lt;/th&gt;
&lt;th&gt;該当&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CVE-2014-0076&lt;/td&gt;
&lt;td&gt;情報漏洩&lt;/td&gt;
&lt;td&gt;あり&lt;/td&gt;
&lt;td&gt;該当なし&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0195&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;あり&lt;/td&gt;
&lt;td&gt;該当なし&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0198&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;あり&lt;/td&gt;
&lt;td&gt;SSL-VPN&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0221&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;なし&lt;/td&gt;
&lt;td&gt;該当なし&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0224&lt;/td&gt;
&lt;td&gt;MITM&lt;/td&gt;
&lt;td&gt;あり&lt;/td&gt;
&lt;td&gt;ScreenOS、SSL-VPN※1&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-3470&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;調査中&lt;/td&gt;
&lt;td&gt;Junos Pulseは影響なし&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2010-5298&lt;/td&gt;
&lt;td&gt;DoS&lt;/td&gt;
&lt;td&gt;あり&lt;/td&gt;
&lt;td&gt;SSL-VPN(IVE OS 8.0r4, and 7.4r11未満)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;※1　サーバが7.4Rx または8.0Rxで クライアントがPulseまたはN/Cを利用している場合。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;CVE&lt;/th&gt;
&lt;th&gt;Workarounds&lt;/th&gt;
&lt;th&gt;根本対応&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CVE-2014-0076&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0195&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0198&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;情報なし&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0221&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0224&lt;/td&gt;
&lt;td&gt;ScreenOS:SSLを使う機能を停止(e.g.GUI)&lt;/td&gt;
&lt;td&gt;バージョンアップ&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-3470&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2010-5298&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;情報なし&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h1 id=&#34;checkpoint-1:3197b1351379e2f9e723d5ccc5720427&#34;&gt;CheckPoint&lt;/h1&gt;

&lt;p&gt;　こちらにまとまっています。]&lt;a href=&#34;https://supportcenter.checkpoint.com/supportcenter/portal?eventSubmit_doGoviewsolutiondetails=&amp;amp;solutionid=sk92447&amp;amp;js_peid=P-114a7ba5fd7-10001&amp;amp;partition=General&amp;amp;product=All%22&#34;&gt;4&lt;/a&gt; 　OpenSSL脆弱性に対しては安心のCheckPoint。 　&lt;/p&gt;

&lt;p&gt;| CVE           | Impact | 影響 | 該当                  |
| &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;- | &amp;mdash;&amp;mdash; | &amp;ndash; | &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;- |
| CVE-2014-0076 | 情報漏洩   | なし | &amp;#8211;             |
| CVE-2014-0195 | DoS    | なし | &amp;#8211;             |
| CVE-2014-0198 | DoS    | なし | &amp;#8211;             |
| CVE-2014-0221 | DoS    | なし | &amp;#8211;             |
| CVE-2014-0224 | MITM   | あり | Mobile Access Blade |
| CVE-2014-3470 | DoS    | なし | &amp;#8211;             |
| CVE-2010-5298 | DoS    | なし | &amp;#8211;             |&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;CVE&lt;/th&gt;
&lt;th&gt;Workarounds&lt;/th&gt;
&lt;th&gt;根本対応&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CVE-2014-0076&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0195&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0198&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0221&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-0224&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;FotFixの適応&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2014-3470&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;CVE-2010-5298&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;td&gt;&amp;#8211;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h1 id=&#34;cisco:3197b1351379e2f9e723d5ccc5720427&#34;&gt;Cisco&lt;/h1&gt;

&lt;p&gt;　絶賛調査中のようです。&lt;a href=&#34;http://tools.cisco.com/security/center/content/CiscoSecurityAdvisory/cisco-sa-20140605-openssl&#34;&gt;Multiple Vulnerabilities in OpenSSL Affecting Cisco Products&lt;/a&gt; 　HeartBleedの影響を受けた製品と、今回の脆弱性の内容を踏まえると、ASA,Aironetあたりが対象になるのかも。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>FortiGateのAV/IPS定義ファイル更新</title>
      <link>http://aimless.jp/blog/archives/1879</link>
      <pubDate>Fri, 02 May 2014 00:00:00 +0000</pubDate>
      
      <guid>http://aimless.jp/blog/archives/1879</guid>
      <description>

&lt;p&gt;メモ。&lt;/p&gt;

&lt;h2 id=&#34;定義ファイルの更新を確認する方法:ebf3516eebc182a649a4479679bacc27&#34;&gt;定義ファイルの更新を確認する方法&lt;/h2&gt;

&lt;h3 id=&#34;1-イベントログ:ebf3516eebc182a649a4479679bacc27&#34;&gt;1．イベントログ&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;http://docs.fortinet.com/uploaded/files/1745/fortigate-lmr-40-mr3.pdf&#34;&gt;FortiGate® Log Message Reference&lt;/a&gt;より。41000（成功）はよく見るけど、42000（失敗）は見たことがない。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Event-pattern Event-pattern logs are recorded whenever an administrator updates virus, IPS, and antispam databases from the FortiGuard network. 41000 41001&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;2-gui:ebf3516eebc182a649a4479679bacc27&#34;&gt;2．GUI&lt;/h3&gt;

&lt;p&gt;システム＞設定＞FortiGuardで確認する&lt;/p&gt;

&lt;h3 id=&#34;3-cli:ebf3516eebc182a649a4479679bacc27&#34;&gt;3．CLI&lt;/h3&gt;

&lt;p&gt;diagnose autoupdate status で自動更新を行った時間とその結果が分かる。我が家のFortiGateはFortiGuardが切れているので、ResultがUnauthorizedになっている。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Virus Definitions&lt;/p&gt;

&lt;p&gt;Version: 14.00000 Contract Expiry Date: Wed Feb 29 00:00:00 2012 Last Updated using manual update on Wed Aug 24 17:17:00 2011 Last Update Attempt: Fri May 2 01:55:13 2014 Result: Unauthorized&lt;/p&gt;

&lt;p&gt;Attack Definitions&lt;/p&gt;

&lt;p&gt;Version: 3.00295 Contract Expiry Date: Wed Feb 29 00:00:00 2012 Last Updated using manual update on Wed Jan 30 19:23:00 2013 Last Update Attempt: Fri May 2 01:55:13 2014 Result: Unauthorized&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;定義ファイルの更新を監視する方法:ebf3516eebc182a649a4479679bacc27&#34;&gt;定義ファイルの更新を監視する方法&lt;/h2&gt;

&lt;h3 id=&#34;1-syslogログ監視:ebf3516eebc182a649a4479679bacc27&#34;&gt;1．syslogログ監視&lt;/h3&gt;

&lt;p&gt;自動更新の結果がログに出力されるわけですから、syslogを利用してそのログを監視する。syslogサーバにそのままsyslogを送ってしまうと、イベントログだけでなくトラフィックログも流れてしまう。これを避けるために、監視サーバのsyslog設定をCLIから個別に設定し、不要なログをフィルタする。&lt;/p&gt;

&lt;h3 id=&#34;2-snmp監視:ebf3516eebc182a649a4479679bacc27&#34;&gt;2．SNMP監視&lt;/h3&gt;

&lt;p&gt;何かしらの原因により自動更新が止まってしまった場合、失敗のログすら出ない可能性がある。それに備えて、定義ファイルのバージョンそのものを監視する。1.3.6.1.4.1.12356.101.4.2配下に以下のOIDがあり、定義ファイルのバージョンがSTRINGで格納されている。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;fgSysVersionAv&lt;/li&gt;
&lt;li&gt;fgSysVersionIps&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;SNMPv2-SMI::enterprises.12356.101.4.2.1.0 = STRING: &amp;#8220;14.00000(2011-08-24 17:17)&amp;#8221; SNMPv2-SMI::enterprises.12356.101.4.2.2.0 = STRING: &amp;#8220;3.00295(2013-01-30 19:23)&amp;#8221;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;デフォルトの設定だと、FortiGateは1日1回FortiGuardのサーバにアクセスし定義ファイルを更新する。そのため、1日1回下記のOIDにアクセスし、取得したあたいが前回値と同一であれば定義ファイルが更新できていないことになる。※定義ファイルが作られていないというケースもありうるが。。。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>FortiGateのsyslogをパースするFluentdのプラグインを作った。</title>
      <link>http://aimless.jp/blog/archives/1735</link>
      <pubDate>Tue, 18 Mar 2014 00:00:00 +0000</pubDate>
      
      <guid>http://aimless.jp/blog/archives/1735</guid>
      <description>&lt;p&gt;勢いだけで、FortiGateのsyslogをパースするためのFluentdプラグインを作りました。&lt;a href=&#34;https://github.com/kongou-ae/fluent-plugin-fortigate-traffic-log&#34; title=&#34;fluent-plugin-fortigate-traffic-log&#34; target=&#34;_blank&#34;&gt;fluent-plugin-fortigate-traffic-log&lt;/a&gt;です。（命名センスなし）&lt;/p&gt;

&lt;p&gt;　「ファイアウォールの通信ログを気軽に分析できれば、ユーザへの提案に繋がる何かが生まれそうだなー」と思い、FortiGateのsyslogをFluentd+Elastic Search+kibana3の組み合わせに乗せるべく試行錯誤した結果です。当初は普通のTailインプットプラグインでサポートされている正規表現で頑張るつもりでしたが、FortiGateのsyslogのフォーマットが一定でなかったため、カスタムパーサを作った次第です。&lt;/p&gt;

&lt;p&gt;　このプラグインでFortiGateのsyslogファイルをインプットして、elasticsearchへアウトプットすると、下図のような形で格納されます。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/images/es-forti.png&#34; alt=&#34;elasticsearch-fortigate&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　kibana3を利用すると下図のようなログビュアーが作れます。非管理者に通信ログを見せたい場合などに使えるかも？通信内容を集計したグラフなんかも作れるのでしょうか？（elasticsearchとkibana3は現在勉強中なので、実現可否は不明瞭。）&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/images/kibana3-fortigate.png&#34; alt=&#34;kibana3-fortigate.png&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　現在の実装ではsyslogで飛んできたログをなんでも処理しますので、fluent-plugin-fortigate-traffic-logという名前にも関わらずeventログやUTMログも処理されてしまいます。type=trafficの時のみ処理する形にすればいいと思うので、そのうち直したいです。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>FortiGateでter len 0</title>
      <link>http://aimless.jp/blog/archives/1629</link>
      <pubDate>Sat, 29 Jun 2013 00:00:00 +0000</pubDate>
      
      <guid>http://aimless.jp/blog/archives/1629</guid>
      <description>&lt;p&gt;いつも忘れてしまうのでメモ。デフォルトはmore。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# show system console                                                                 
config system console
    set output standard
end
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>FortigateでGeoIPを使う</title>
      <link>http://aimless.jp/blog/archives/1283</link>
      <pubDate>Sat, 22 Sep 2012 00:00:00 +0000</pubDate>
      
      <guid>http://aimless.jp/blog/archives/1283</guid>
      <description>

&lt;p&gt;&lt;/p&gt;&lt;/p&gt;

&lt;p&gt;　JANOGのMLで話題になっているGeoIPがFortigateでも使えるよーというお話です。弄ってたら気付きました。&lt;/p&gt;

&lt;h3 id=&#34;設定方法:3e0112b83a1de8e6c95644c943aa70e1&#34;&gt;設定方法&lt;/h3&gt;

&lt;p&gt;　アドレスオブジェクトのタイプを「地域」を選択して、国を選択します。今回は日本にしてみました。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/images/geoip-forti-01.png&#34; alt=&#34;fortigate-geoip-01&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　作成したアドレスオブジェクトを利用してルールを作成します。これによりLAN内の端末はFortigateが日本と判断するIPアドレスにしかアクセスできなくなります。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/images/geoip-forti-02.png&#34; alt=&#34;fortigate-geoip-02&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　どうやってIPアドレスと国を紐づけているのかなと調べて見たら、マニュアルに書いてありました。FortiGuardからデータを入手してローカルに持っているみたいです。&lt;/p&gt;

&lt;blockquote cite=&#34;http://docs.fortinet.com/fgt/handbook/40mr3/fortigate-firewall-40-mr3.pdf&#34;&gt;
  &lt;p&gt;
    The FortiGate unit includes an internal list of countries and IP addresses based on historical data from the FortiGuard network
  &lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;cite&gt;&lt;a href=&#34;http://docs.fortinet.com/fgt/handbook/40mr3/fortigate-firewall-40-mr3.pdf&#34; title=&#34;FortiOS™ Handbook v3 for FortiOS 4.0 MR3&#34; target=&#34;_blank&#34;&gt;FortiOS™ Handbook v3 for FortiOS 4.0 MR3&lt;/a&gt;&lt;/cite&gt;&lt;/p&gt;

&lt;h3 id=&#34;ipと地域のマッピングdbを確認する:3e0112b83a1de8e6c95644c943aa70e1&#34;&gt;IPと地域のマッピングDBを確認する&lt;/h3&gt;

&lt;p&gt;　実際にFortigateが持っているDBを確認する事も出来ます。アドレスオブジェクトで利用している国のみDBを持つみたいです。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;###　設定した国の略称を確認する
(root) # diagnose firewall ipgeo country-list
Total countries loaded:1
JP

###　その国に一致するIPアドレスを表示する
 (root) # diagnose firewall ipgeo ip-list JP
            1.0.16.0 - 1.0.31.255
            1.0.64.0 - 1.0.127.255
       （中略）
       223.223.208.0 - 223.223.215.255
       223.223.224.0 - 223.223.255.255
Country name:JP Total IP Range:1337

###　61.213.187.132（www.mofa.go.jp）を調べて見る。
 (root) # diagnose firewall ipgeo ip2country 61.213.187.132                         
61.213.187.132 is in country:JP

###　GoogleDNSを調べて見たが、DBに存在しない
 (root) # diagnose firewall ipgeo ip2country 8.8.8.8                                
8.8.8.8 is not in kernel ip-country DB
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>FortigateのSSL-VPNで2要素認証してみた</title>
      <link>http://aimless.jp/blog/archives/1272</link>
      <pubDate>Tue, 11 Sep 2012 00:00:00 +0000</pubDate>
      
      <guid>http://aimless.jp/blog/archives/1272</guid>
      <description>

&lt;p&gt;&lt;/p&gt;&lt;/p&gt;

&lt;p&gt;　いつか仕事でやることもあるだろうという事で、FortigateのSSL-VPNでの二要素認証のやり方をメモします。FortiOSはv4 MR3 Patch 6です。仕組みとしてはハードウェアトークン（FortiToken）、Email、SMSの3種類ありますが、今回はEmailになります。&lt;/p&gt;

&lt;h3 id=&#34;mtaの登録:6bb5d555ef829444fa722170bec6b738&#34;&gt;MTAの登録&lt;/h3&gt;

&lt;p&gt;　Fortigateが利用するMTAを登録します。送信元メールアドレスを指定したい場合は、合わせて設定します。私の環境はVDOMを利用しているので、MTAの設定はグローバル側に、送信元メールアドレスの設定はVDOM側に存在していました。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/images/forti-ssl01.png&#34; alt=&#34;MTAの設定&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/images/forti-ssl01a.png&#34; alt=&#34;送信元メアドの設定&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;二要素認証の追加:6bb5d555ef829444fa722170bec6b738&#34;&gt;二要素認証の追加&lt;/h3&gt;

&lt;p&gt;二要素認証を実施したいユーザの設定画面で、二要素認証を追加します。Emailの項目に記載したアドレスに、認証コードが送信されます。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/images/forti-ssl02.png&#34; alt=&#34;二要素認証の有効化&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;ssl-vpnでアクセスする:6bb5d555ef829444fa722170bec6b738&#34;&gt;SSL-VPNでアクセスする&lt;/h3&gt;

&lt;p&gt;　二要素認証を有効にしたユーザでSSL-VPNのログイン画面にアクセスします。IDとPassの認証を通過すると、Tokenの入力を求められます。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/images/forti-ssl04.png&#34; alt=&#34;TokenCodeの要求&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　二要素認証を設定した際に入力したEmailアドレスにTokenCodeが送信されていますので、これを入力するといつものWEBポータルにつながります。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/images/forti-ssl03.png&#34; alt=&#34;EmailでのTokenCode&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　携帯のメアドにTokenCodeを送るようにすれば、かなり簡単に二要素認証を実現できますね。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>扇風機でNW機器を冷やしてみた</title>
      <link>http://aimless.jp/blog/archives/1226</link>
      <pubDate>Sun, 29 Jul 2012 00:00:00 +0000</pubDate>
      
      <guid>http://aimless.jp/blog/archives/1226</guid>
      <description>&lt;p&gt;&lt;/p&gt;&lt;/p&gt;

&lt;p&gt;　現在自宅では、Cisco892JとFortigate-50Bが24時間稼働しています。導入後初めての夏を迎え「エアコンなしの部屋でどうなるかなー」と思っていたのですが、Fortigateの表面がやや熱い。&lt;/p&gt;

&lt;p&gt;　冷やした方がいいんだろうなぁと思いつつも、この2台の為にエアコンを導入するくらいならサーバが欲しい。というわけで、USB扇風機で風を当ててみました。両機器とも温度を確認できない？ので数値的な比較はできないのですが、触ってみた感じですとちょっと冷たくなった気がします。今年の夏はこれで乗り切りたい。。。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/images/usbfan.png&#34; alt=&#34;usbfan&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　USB扇風機はCisco892JのUSBポートで給電しています。Cisco892JのUSBポートマジ便利。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ForigateでSSL-VPN（トンネルモード）</title>
      <link>http://aimless.jp/blog/archives/1135</link>
      <pubDate>Sun, 17 Jun 2012 00:00:00 +0000</pubDate>
      
      <guid>http://aimless.jp/blog/archives/1135</guid>
      <description>

&lt;p&gt;&lt;/p&gt;&lt;/p&gt;

&lt;p&gt;　そのうち仕事でやるだろうということで、自宅で試した手順をメモしておきます。環境は、Fortigate-50B＋FortiOS4.0 MR3 Patch 6です。&lt;/p&gt;

&lt;p&gt;　やりたかった事は下図の通り。利用ユーザのグループ単位で、ポータルを変えたり、IPアドレスを変えたり、社内へのアクセスポリシーを変えたり等々柔軟に。自社ユーザは社内にフルアクセスで、社外保守ベンダは社員とは別IPアドレスで、さらにアクセス先を制限するみたいな使い方を想定しています。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/images/sslvpn.png&#34; alt=&#34;sslvpn&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;ユーザ作成のハマりどころ:483e536bcb93d01cf7c3b5a7bcb27b43&#34;&gt;ユーザ作成のハマりどころ&lt;/h3&gt;

&lt;p&gt;　ユーザとIPアドレスを直接関連付ける設定箇所が見当たりませんでした。トンネル用のIPアドレスを指定できる場所は、ポータルの設定部分しかありません。そこで下記の様にしました。&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;IPアドレスを分けたいユーザグループごとにポータルを作成して、そのグループが利用するIPアドレスを設定する。&lt;/li&gt;
&lt;li&gt;ユーザグループ作成時に、そのグループ用のポータルを割り当てる&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;fwの設定:483e536bcb93d01cf7c3b5a7bcb27b43&#34;&gt;FWの設定&lt;/h3&gt;

&lt;p&gt;　必要な設定は大きく二つ。一つはSSL-VPNでのアクセスを自体を許可するルール、もう一つはトンネル接続を許可するルールです。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/images/sslvpn-policy.png&#34; alt=&#34;sslvpn-policy&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　1つ目のルール（上図ルール8）の詳細は下記の通りです。必要なユーザグループに対して、インターネットの全てからLAN内の192.168.2.0/24へのSSLVPNを許可します。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/images/sslvpn-policy-detail.png&#34; alt=&#34;sslvpn-policy-detail&#34; /&gt;&lt;/p&gt;

&lt;p&gt;　2つ目のルール（上図ルール4）の詳細は下記の通りです。sslall_group内のユーザがトンネル接続した時に割り当てられるIPアドレスから、LAN内の192.168.2.0/24に対してTELNETとICMPを許可します。Fortigateから見ると、トンネル接続用のIPアドレスはssl.root（SSLVPNトンネルインターフェース）の先にいますので、WANではなくssl.rootを選択します。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://aimless.jp/blog/images/sslvpn-policy-detail2.png&#34; alt=&#34;sslvpn-policy-detail2&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;forticlientの設定:483e536bcb93d01cf7c3b5a7bcb27b43&#34;&gt;FortiClientの設定&lt;/h3&gt;

&lt;p&gt;　これでブラウザ経由でのトンネル接続が可能になります。なお、FortigateにはFortiClinetと呼ばれるクライアントソフトがあります。昔はFortiClientそのものが一般公開されていたように記憶していますが、現在はFortiClient Liteしか一般公開されていないみたいです。これを使うための特殊な設定は不要です。クライアントを入れてアクセス先を指定すれば普通に繋がります。&lt;/p&gt;

&lt;p&gt;　クライアントインストール時に「IE6じゃ動かないからIE8以上にしてねー（意訳）」という注意が出ますので、素直に従ってください。本当にIE6では動きませんでした。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>